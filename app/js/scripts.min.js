$(document).ready(function(){$(".btn-popup").magnificPopup({type:"inline",closeOnBgClick:!1,focus:"#callback-name"}),$(".form .form__label").each(function(){var e=$(this).attr("for");"required"===$("#"+e).attr("required")&&$(this).addClass("form__label--required")}),$(".form__input[type=tel]").mask("+7 (999) 999-99-99");var r=$(".input-file-wrap");function n(e){var t=0;return $(e).each(function(e,a){t=a.size<=6291456&&("image/png"==a.type||"image/jpeg"==a.type)?(r.find(".input-status").html("Файл(ы) загружен"),!0):(r.find(".input-status").html("Выберите файл"),!1)}),t}r.on("drag dragstart dragend dragover dragenter dragleave drop",function(){return!1}),r.on("dragover dragenter",function(){r.addClass("input-file-wrap--dragover")}),r.on("dragleave",function(e){r.removeClass("input-file-wrap--dragover")}),r.on("drop",function(e){r.removeClass("input-file-wrap--dragover"),e.preventDefault();var a=$("#callback-file"),t=e.originalEvent.dataTransfer.files;n(t)&&a.prop("files",t)}),$("#callback-file").change(function(){var e=$(this);!1===n(this.files)&&(e[0].value="")}),$("#callback-form").submit(function(){var e=$(this),a=new FormData(this),t=$(".form__button");return t.attr("disabled",!0),t.addClass("form__button--loading"),$.ajax({type:"POST",url:"mail/send.php",contentType:!1,processData:!1,data:a}).done(function(){t.removeClass("form__button--loading"),$(e).find(".form__success").css("display","flex").hide().fadeIn(),setTimeout(function(){$(e).find(".form__success").fadeOut()},4e3),setTimeout(function(){t.attr("disabled",!1),e.trigger("reset"),$.magnificPopup.close()},6e3)}),!1})});